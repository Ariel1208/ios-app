(self.webpackChunkmovilTianguiztli=self.webpackChunkmovilTianguiztli||[]).push([[97],{97:(t,e,n)=>{"use strict";n.r(e),n.d(e,{LoginAppPageModule:()=>h});var o=n(1116),i=n(1462),r=n(8809),s=n(9185),a=n(4762),c=n(5614),u=n(1070);const l=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i){this.service=t,this.router=e,this.controlMenu=n,this.loadingController=o,this.toastController=i}ngOnInit(){this.controlMenu.enable(!1),this.validarSesion()}validarSesion(){window.localStorage.getItem("nombre")&&this.router.navigate(["app/tabs/inicio/"])}login(t,e){this.service.LoginPost({email:t.value,pass:e.value}).then(t=>{var e=[];if(t.id_usuario){var n=t.ruta_imagen;e=n.split("/"),console.log(e),n="sin"==e[0]?"https://pruebas.tianguiztli.com/check/imagenesUsuarios/anonimo.png":"https:"==e[0]?n:"https://pruebas.tianguiztli.com/check/"+e[1]+"/"+e[2]+"/"+e[3],this.presentLoading(t.nombre).then(e=>{window.localStorage.setItem("id",t.id_usuario),window.localStorage.setItem("nombre",t.nombre),window.localStorage.setItem("mail",t.correo),window.localStorage.setItem("img",n),this.router.navigate(["/app/tabs/inicio"])})}else this.presentToast()})}presentLoading(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({cssClass:"my-custom-class",message:"Bienvenido "+t,duration:2e3});yield e.present(),yield e.onDidDismiss()})}presentToast(){return(0,a.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Datos incorrectos",duration:2e3})).present()})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.T),c.Y36(s.F0),c.Y36(r._q),c.Y36(r.HT),c.Y36(r.yF))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-login-app"]],decls:20,vars:0,consts:[["id","header",1,"ion-padding-top"],["for",""],["src","../../assets/img-app/icon_1024.png"],["id","form"],[1,"ion-margin-bottom"],["position",""],["type","text"],["email",""],["pass",""],["color","tian","expand","block","shape","round",3,"click"]],template:function(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-content"),c.TgZ(1,"ion-content"),c.TgZ(2,"div",0),c.TgZ(3,"label",1),c.TgZ(4,"h2"),c._uU(5,"Comercializadora Tianguiztli"),c.qZA(),c.qZA(),c._UZ(6,"img",2),c.qZA(),c.TgZ(7,"form",3),c.TgZ(8,"ion-item",4),c.TgZ(9,"ion-label",5),c._uU(10,"Correo empresarial:"),c.qZA(),c._UZ(11,"ion-input",6,7),c.qZA(),c.TgZ(13,"ion-item",4),c.TgZ(14,"ion-label",5),c._uU(15,"Contrase\xf1a:"),c.qZA(),c._UZ(16,"ion-input",6,8),c.qZA(),c.TgZ(18,"ion-button",9),c.NdJ("click",function(){c.CHM(t);const n=c.MAs(12),o=c.MAs(17);return e.login(n,o)}),c._uU(19,"Iniciar sesi\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}},directives:[r.W2,i._Y,i.JL,i.F,r.Ie,r.Q$,r.pK,r.j9,r.YG],styles:["*[_ngcontent-%COMP%]{font-family:Righteous,cursive}ion-content[_ngcontent-%COMP%]{--background:#e8f0f2}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:800;font-size:20px;color:#141212;margin-bottom:5%}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:205px;height:205px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]{margin-top:10%;padding-left:30px;padding-right:30px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{background-color:#053742;margin-top:35px;height:48px;font-size:18px;text-transform:none;border-radius:10px;box-shadow:1px 8px 8px 0 #0000000d;--box-shadow:none}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-radius:10px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:Righteous,cursive;font-size:15px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-family:Righteous,cursive;color:#000}"]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(l)],s.Bz]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,i.u5,r.Pc,g]]}),t})()},1070:(t,e,n)=>{"use strict";n.d(e,{T:()=>s});var o=n(5614),i=n(2693),r=n(9317);let s=(()=>{class t{constructor(t,e){this.http=t,this.storage=e,this.url="https://miapp-tianguiztli.herokuapp.com/"}getUsers(){var t=this.url+"Usuarios";return new Promise(e=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}LoginPost(t){var e=this.url+"validacionUsuario";return new Promise((n,o)=>{this.http.post(e,t).subscribe(t=>{n(t)},t=>{if(t)throw t})})}getPlatillos(){var t=this.url+"platillosSemanales";return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getPagos(){var t=this.url+"pagosUsuario/"+window.localStorage.getItem("id");return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getAdeudos(){var t=this.url+"adeudosUsuario/"+window.localStorage.getItem("id");return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getEncuestas(){var t=this.url+"encuestasUsuario/"+window.localStorage.getItem("id");return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t[0])},t=>{if(t)throw t})})}getInfoEncuestas(){var t=this.url+"detallesEncuesta";return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getInfoEncuestasDisponibles(){var t=this.url+"FechasEncuestas";return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t[0])},t=>{if(t)throw t})})}addDatosEncuesta(t,e){var n=this.url+"contestarEncuesta/"+e;return new Promise((e,o)=>{this.http.post(n,t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getNotificaciones(){var t=this.url+"obtenerNotificacionUsuario/"+window.localStorage.getItem("id");return new Promise((e,n)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}tareaCloudStorage(t,e){return this.storage.upload(t,e)}referenciaCloudStorage(t){return this.storage.ref(t)}cambiarUrlImgUsuario(t){var e={url:t},n=this.url+"CambiarUrlImg/"+window.localStorage.getItem("id");return new Promise((t,o)=>{this.http.post(n,e).subscribe(e=>{t(e)},t=>{if(t)throw t})})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(i.eN),o.LFG(r.Q1))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);