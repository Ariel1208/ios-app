(self.webpackChunkmovilTianguiztli=self.webpackChunkmovilTianguiztli||[]).push([[4530],{4530:(t,e,o)=>{"use strict";o.r(e),o.d(e,{PerfilPageModule:()=>h});var n=o(1116),i=o(1462),r=o(8809),s=o(9185),a=o(4762),l=o(5614),c=o(1070);const g=[{path:"",component:(()=>{class t{constructor(t,e,o){this.actionSheetController=t,this.service=e,this.toastController=o,this.img="",this.newImg="",this.nombre="",this.email=""}ngOnInit(){this.datos(),console.log("Perfil")}datos(){this.img=window.localStorage.getItem("img"),this.nombre=window.localStorage.getItem("nombre"),this.email=window.localStorage.getItem("mail")}presentActionSheet(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.actionSheetController.create({header:"Opciones",cssClass:"my-custom-class",buttons:[{text:"Cambiar foto de perfil",icon:"camera",handler:()=>{document.getElementById("pwaPhoto").click()}}]});yield t.present();const{role:e}=yield t.onDidDismiss();console.log("onDidDismiss resolved with role",e)})}cambiarFoto(t){this.uploadFiles=t.target.files,console.log(this.uploadFiles);let e=new FormData;for(let n=0;n<this.uploadFiles.length;n++)console.log(this.uploadFiles[n].text),e.append("uploads",this.uploadFiles[n],this.uploadFiles[n].name);let o=this.service.referenciaCloudStorage(this.uploadFiles[0].name);this.service.tareaCloudStorage(this.uploadFiles[0].name,e.get("uploads")).then(t=>{t.state?o.getDownloadURL().subscribe(t=>{this.service.cambiarUrlImgUsuario(t),window.localStorage.setItem("img",t),this.img=t,this.presentToast("Imagen actualizada con exito")}):this.presentToast("Error al cambiar la imagen de perfil")})}presentToast(t){return(0,a.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:2e3})).present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(r.BX),l.Y36(c.T),l.Y36(r.yF))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-perfil"]],decls:22,vars:3,consts:[["color","tian"],["slot","start"],["autoHide","false"],["slot","end"],["fill","solid","color","tian",1,"bordered",3,"click"],["color","","name","settings-sharp"],["id","header",1,"ion-padding-top"],[3,"src"],["for",""],["id","form"],[1,"ion-margin-bottom","text-wrap"],["position","floating"],["type","text","disabled","",3,"value"],["type","file","id","pwaPhoto","accept","image/x-png,image/jpeg",2,"display","none",3,"change"],["pwaphoto",""]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-menu-button",2),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5,"Mi perfil"),l.qZA(),l.TgZ(6,"ion-buttons",3),l.TgZ(7,"ion-button",4),l.NdJ("click",function(){return e.presentActionSheet()}),l._UZ(8,"ion-icon",5),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.TgZ(10,"div",6),l._UZ(11,"img",7),l.TgZ(12,"label",8),l.TgZ(13,"h2"),l._uU(14),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"form",9),l.TgZ(16,"ion-item",10),l.TgZ(17,"ion-label",11),l._uU(18,"Correo empresarial:"),l.qZA(),l._UZ(19,"ion-input",12),l.qZA(),l.qZA(),l.TgZ(20,"input",13,14),l.NdJ("change",function(t){return e.cambiarFoto(t)}),l.qZA(),l.qZA()),2&t&&(l.xp6(11),l.s9C("src",e.img,l.LSH),l.xp6(3),l.Oqu(e.nombre),l.xp6(5),l.s9C("value",e.email))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.gu,r.W2,i._Y,i.JL,i.F,r.Ie,r.Q$,r.pK,r.j9],styles:["*[_ngcontent-%COMP%]{font-family:Righteous,cursive}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{background-color:#003638;letter-spacing:4px;color:#fff}ion-content[_ngcontent-%COMP%]{--background:#eff0f3}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;border:3px solid #000}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]{margin-top:15%;padding-left:30px;padding-right:30px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{background-color:#000;margin-top:35px;height:48px;font-size:18px;text-transform:none;border-radius:50px;box-shadow:1px 8px 8px 0 #0000000d;--box-shadow:none}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:Anton,sans-serif;font-size:15px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{letter-spacing:3px;color:#000}"]}),t})()}];let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.ez,i.u5,r.Pc,u]]}),t})()},1070:(t,e,o)=>{"use strict";o.d(e,{T:()=>s});var n=o(5614),i=o(2693),r=o(9317);let s=(()=>{class t{constructor(t,e){this.http=t,this.storage=e,this.url="https://miapp-tianguiztli.herokuapp.com/"}getUsers(){var t=this.url+"Usuarios";return new Promise(e=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}LoginPost(t){var e=this.url+"validacionUsuario";return new Promise((o,n)=>{this.http.post(e,t).subscribe(t=>{o(t)},t=>{if(t)throw t})})}getPlatillos(){var t=this.url+"platillosSemanales";return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getPagos(){var t=this.url+"pagosUsuario/"+window.localStorage.getItem("id");return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getAdeudos(){var t=this.url+"adeudosUsuario/"+window.localStorage.getItem("id");return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getEncuestas(){var t=this.url+"encuestasUsuario/"+window.localStorage.getItem("id");return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t[0])},t=>{if(t)throw t})})}getInfoEncuestas(){var t=this.url+"detallesEncuesta";return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getInfoEncuestasDisponibles(){var t=this.url+"FechasEncuestas";return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t[0])},t=>{if(t)throw t})})}addDatosEncuesta(t,e){var o=this.url+"contestarEncuesta/"+e;return new Promise((e,n)=>{this.http.post(o,t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}getNotificaciones(){var t=this.url+"obtenerNotificacionUsuario/"+window.localStorage.getItem("id");return new Promise((e,o)=>{this.http.get(t).subscribe(t=>{e(t)},t=>{if(t)throw t})})}tareaCloudStorage(t,e){return this.storage.upload(t,e)}referenciaCloudStorage(t){return this.storage.ref(t)}cambiarUrlImgUsuario(t){var e={url:t},o=this.url+"CambiarUrlImg/"+window.localStorage.getItem("id");return new Promise((t,n)=>{this.http.post(o,e).subscribe(e=>{t(e)},t=>{if(t)throw t})})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(i.eN),n.LFG(r.Q1))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);