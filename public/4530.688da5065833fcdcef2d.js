(self.webpackChunkmovilTianguiztli=self.webpackChunkmovilTianguiztli||[]).push([[4530],{4530:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PerfilPageModule:()=>p});var o=n(1116),i=n(1462),r=n(8809),s=n(9185),a=n(4762),l=n(5614),c=n(1070);const g=[{path:"",component:(()=>{class t{constructor(t,e,n){this.actionSheetController=t,this.service=e,this.toastController=n,this.img="",this.newImg="",this.nombre="",this.email=""}ngOnInit(){this.datos(),console.log("Perfil")}datos(){this.img=window.localStorage.getItem("img"),this.nombre=window.localStorage.getItem("nombre"),this.email=window.localStorage.getItem("mail")}presentActionSheet(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.actionSheetController.create({header:"Opciones",cssClass:"my-custom-class",buttons:[{text:"Cambiar foto de perfil",icon:"camera",handler:()=>{document.getElementById("pwaPhoto").click()}}]});yield t.present();const{role:e}=yield t.onDidDismiss();console.log("onDidDismiss resolved with role",e)})}cambiarFoto(t){this.uploadFiles=t.target.files,console.log(this.uploadFiles);let e=new FormData;for(let o=0;o<this.uploadFiles.length;o++)console.log(this.uploadFiles[o].text),e.append("uploads",this.uploadFiles[o],this.uploadFiles[o].name);let n=this.service.referenciaCloudStorage(this.uploadFiles[0].name);this.service.tareaCloudStorage(this.uploadFiles[0].name,e.get("uploads")).then(t=>{t.state?n.getDownloadURL().subscribe(t=>{this.service.cambiarUrlImgUsuario(t),window.localStorage.setItem("img",t),this.img=t,this.presentToast("Imagen actualizada con exito")}):this.presentToast("Error al cambiar la imagen de perfil")})}presentToast(t){return(0,a.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:2e3})).present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(r.BX),l.Y36(c.T),l.Y36(r.yF))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-perfil"]],decls:22,vars:3,consts:[["color","tian"],["slot","start"],["autoHide","false"],["slot","end"],["fill","solid","color","tian",1,"bordered",3,"click"],["color","","name","settings-sharp"],["id","header",1,"ion-padding-top"],[3,"src"],["for",""],["id","form"],[1,"ion-margin-bottom","text-wrap"],["position","floating"],["type","text","disabled","",3,"value"],["type","file","id","pwaPhoto","accept","image/x-png,image/jpeg",2,"display","none",3,"change"],["pwaphoto",""]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-menu-button",2),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5,"Mi perfil"),l.qZA(),l.TgZ(6,"ion-buttons",3),l.TgZ(7,"ion-button",4),l.NdJ("click",function(){return e.presentActionSheet()}),l._UZ(8,"ion-icon",5),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.TgZ(10,"div",6),l._UZ(11,"img",7),l.TgZ(12,"label",8),l.TgZ(13,"h2"),l._uU(14),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"form",9),l.TgZ(16,"ion-item",10),l.TgZ(17,"ion-label",11),l._uU(18,"Correo empresarial:"),l.qZA(),l._UZ(19,"ion-input",12),l.qZA(),l.qZA(),l.TgZ(20,"input",13,14),l.NdJ("change",function(t){return e.cambiarFoto(t)}),l.qZA(),l.qZA()),2&t&&(l.xp6(11),l.s9C("src",e.img,l.LSH),l.xp6(3),l.Oqu(e.nombre),l.xp6(5),l.s9C("value",e.email))},directives:[r.Gu,r.sr,r.Sm,r.fG,r.wd,r.YG,r.gu,r.W2,i._Y,i.JL,i.F,r.Ie,r.Q$,r.pK,r.j9],styles:["*[_ngcontent-%COMP%]{font-family:Anton,sans-serif}ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{background-color:#ee701e;letter-spacing:4px}ion-content[_ngcontent-%COMP%]{--background:#eff0f3}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}ion-content[_ngcontent-%COMP%]   #header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;border:3px solid #000}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]{margin-top:15%;padding-left:30px;padding-right:30px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{background-color:#ee701e;margin-top:35px;height:48px;font-size:18px;text-transform:none;border-radius:50px;box-shadow:1px 8px 8px 0 #0000000d;--box-shadow:none}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:Anton,sans-serif;font-size:15px}ion-content[_ngcontent-%COMP%]   #form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{letter-spacing:3px;color:#ee701e}"]}),t})()}];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,i.u5,r.Pc,d]]}),t})()}}]);